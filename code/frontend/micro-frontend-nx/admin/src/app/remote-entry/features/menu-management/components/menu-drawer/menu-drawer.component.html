<div id="drawer-overlay" [class.opacity-100]="isOpen" [class.pointer-events-auto]="isOpen" [class.opacity-0]="!isOpen"
    [class.pointer-events-none]="!isOpen"
    class="fixed inset-0 bg-slate-900/40 backdrop-blur-[2px] z-[60] transition-opacity duration-300"
    (click)="onClose()">
</div>

<div id="side-drawer" [class.translate-x-0]="isOpen" [class.translate-x-full]="!isOpen"
    class="fixed top-0 right-0 h-full w-[35%] min-w-[560px] bg-white dark:bg-slate-900 z-[70] transition-transform duration-500 ease-[cubic-bezier(0.4,0,0.2,1)] shadow-drawer flex flex-col">

    <!-- Header -->
    <div
        class="px-10 pt-10 pb-8 border-b border-slate-50 dark:border-slate-800 flex items-start justify-between shrink-0 bg-white/80 dark:bg-slate-900/80 backdrop-blur-md">
        <div class="space-y-1">
            <h3 class="text-2xl font-extrabold text-slate-900 dark:text-white tracking-tight">Cấu hình Menu mới</h3>
            <div class="flex items-center gap-2 text-slate-500 dark:text-slate-400 font-medium">
                <span class="material-symbols-outlined !text-[16px]">domain</span>
                <p class="text-[12px] leading-none opacity-80">Ứng dụng: Quản lý nhân sự (HRM)</p>
            </div>
        </div>
        <button (click)="onClose()"
            class="size-10 rounded-full flex items-center justify-center hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-400 transition-all hover:rotate-90">
            <span class="material-symbols-outlined !text-[24px]">close</span>
        </button>
    </div>

    <!-- Scrollable Content -->
    <div class="flex-1 overflow-y-auto custom-scrollbar px-10 py-10 space-y-12">

        <!-- Section: System Identity -->
        <section>
            <div class="group-header flex items-center gap-4 mb-8">
                <span
                    class="group-title text-[11px] font-extrabold text-slate-400 uppercase tracking-[0.15em] whitespace-nowrap">Định
                    danh hệ thống</span>
                <div class="group-line flex-1 h-[1px] bg-slate-100 dark:bg-slate-800"></div>
            </div>
            <div class="grid grid-cols-2 gap-8">
                <div>
                    <label
                        class="block text-[11px] font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-2">Tên
                        Menu
                        (Name) *</label>
                    <input
                        class="w-full px-4 py-3 bg-slate-50 dark:bg-slate-800 border border-slate-200/60 dark:border-slate-700 rounded-xl text-[13.5px] font-medium text-slate-700 dark:text-slate-200 focus:bg-white dark:focus:bg-slate-800 focus:border-primary focus:ring-4 focus:ring-primary/5 transition-all outline-none placeholder:text-slate-400 dark:placeholder:text-slate-500"
                        placeholder="Ví dụ: Quản lý kho" type="text" value="" />
                </div>
                <div>
                    <label
                        class="block text-[11px] font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-2">Mã
                        Menu
                        (Code) *</label>
                    <input
                        class="w-full px-4 py-3 bg-slate-50 dark:bg-slate-800 border border-slate-200/60 dark:border-slate-700 rounded-xl text-[13.5px] font-medium text-slate-700 dark:text-slate-200 focus:bg-white dark:focus:bg-slate-800 focus:border-primary focus:ring-4 focus:ring-primary/5 transition-all outline-none placeholder:text-slate-400 dark:placeholder:text-slate-500 font-mono text-[13px] uppercase tracking-tight"
                        placeholder="MÃ_MENU" type="text" value="" />
                </div>
            </div>
        </section>

        <!-- Section: Navigation & Structure -->
        <section>
            <div class="group-header flex items-center gap-4 mb-8">
                <span
                    class="group-title text-[11px] font-extrabold text-slate-400 uppercase tracking-[0.15em] whitespace-nowrap">Điều
                    hướng & Cấu trúc</span>
                <div class="group-line flex-1 h-[1px] bg-slate-100 dark:bg-slate-800"></div>
            </div>
            <div class="space-y-8">
                <div class="grid grid-cols-2 gap-8">
                    <div>
                        <label
                            class="block text-[11px] font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-2">Loại
                            Menu</label>
                        <div class="relative">
                            <select
                                class="w-full px-4 py-3 bg-slate-50 dark:bg-slate-800 border border-slate-200/60 dark:border-slate-700 rounded-xl text-[13.5px] font-medium text-slate-700 dark:text-slate-200 focus:bg-white dark:focus:bg-slate-800 focus:border-primary focus:ring-4 focus:ring-primary/5 transition-all outline-none placeholder:text-slate-400 appearance-none pr-12 cursor-pointer">
                                <option>Menu chính</option>
                                <option>Menu con (Submenu)</option>
                                <option>Hành động (Action)</option>
                            </select>
                            <span
                                class="material-symbols-outlined absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none">expand_more</span>
                        </div>
                    </div>
                    <div>
                        <label
                            class="block text-[11px] font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-2">Menu
                            cha
                            (Parent)</label>
                        <div class="relative">
                            <select
                                class="w-full px-4 py-3 bg-slate-50 dark:bg-slate-800 border border-slate-200/60 dark:border-slate-700 rounded-xl text-[13.5px] font-medium text-slate-700 dark:text-slate-200 focus:bg-white dark:focus:bg-slate-800 focus:border-primary focus:ring-4 focus:ring-primary/5 transition-all outline-none placeholder:text-slate-400 appearance-none pr-12 cursor-pointer">
                                <option>-- Không có --</option>
                                <option>Hệ thống</option>
                                <option>Vận hành</option>
                            </select>
                            <span
                                class="material-symbols-outlined absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none">expand_more</span>
                        </div>
                    </div>
                </div>
                <div>
                    <label
                        class="block text-[11px] font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-2">Đường
                        dẫn
                        (Path)</label>
                    <div class="relative flex items-center">
                        <span class="absolute left-4 text-slate-300 font-bold text-base select-none">/</span>
                        <input
                            class="w-full px-4 py-3 bg-slate-50 dark:bg-slate-800 border border-slate-200/60 dark:border-slate-700 rounded-xl text-[13.5px] font-medium text-slate-700 dark:text-slate-200 focus:bg-white dark:focus:bg-slate-800 focus:border-primary focus:ring-4 focus:ring-primary/5 transition-all outline-none placeholder:text-slate-400 dark:placeholder:text-slate-500 pl-8"
                            placeholder="warehouse/inventory" type="text" value="" />
                    </div>
                </div>
            </div>
        </section>

        <!-- Section: Display & Interaction -->
        <section>
            <div class="group-header flex items-center gap-4 mb-8">
                <span
                    class="group-title text-[11px] font-extrabold text-slate-400 uppercase tracking-[0.15em] whitespace-nowrap">Hiển
                    thị & Tương tác</span>
                <div class="group-line flex-1 h-[1px] bg-slate-100 dark:bg-slate-800"></div>
            </div>
            <div class="space-y-10">
                <div>
                    <div class="flex items-center justify-between mb-4">
                        <label
                            class="block text-[11px] font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-0">Icon
                            đại
                            diện</label>
                        <div class="relative w-48">
                            <span
                                class="material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 !text-[16px] z-10">search</span>
                            <input
                                class="w-full bg-slate-50 dark:bg-slate-800 border border-slate-200/50 dark:border-slate-700 rounded-xl pl-9 pr-3 py-1.5 text-[12px] font-medium text-slate-700 dark:text-slate-200 outline-none focus:bg-white dark:focus:bg-slate-800 focus:ring-4 focus:ring-primary/5 focus:border-primary/30 transition-all"
                                placeholder="Tìm nhanh..." type="text" />
                        </div>
                    </div>
                    <div
                        class="bg-slate-50/50 dark:bg-slate-800/50 rounded-2xl p-4 border border-slate-100 dark:border-slate-700">
                        <div class="grid grid-cols-8 gap-3">
                            <div
                                class="aspect-square rounded-xl flex items-center justify-center text-slate-400 dark:text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-700 hover:text-primary transition-all cursor-pointer border-2 border-transparent bg-primary/5 text-primary border-primary/20 scale-105">
                                <span class="material-symbols-outlined !text-[20px]">inventory_2</span>
                            </div>
                            <div
                                class="aspect-square rounded-xl flex items-center justify-center text-slate-400 dark:text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-700 hover:text-primary transition-all cursor-pointer border-2 border-transparent">
                                <span class="material-symbols-outlined !text-[20px]">dashboard</span>
                            </div>
                            <div
                                class="aspect-square rounded-xl flex items-center justify-center text-slate-400 dark:text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-700 hover:text-primary transition-all cursor-pointer border-2 border-transparent">
                                <span class="material-symbols-outlined !text-[20px]">settings</span>
                            </div>
                            <div
                                class="aspect-square rounded-xl flex items-center justify-center text-slate-400 dark:text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-700 hover:text-primary transition-all cursor-pointer border-2 border-transparent">
                                <span class="material-symbols-outlined !text-[20px]">group</span>
                            </div>
                            <div
                                class="aspect-square rounded-xl flex items-center justify-center text-slate-400 dark:text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-700 hover:text-primary transition-all cursor-pointer border-2 border-transparent">
                                <span class="material-symbols-outlined !text-[20px]">precision_manufacturing</span>
                            </div>
                            <div
                                class="aspect-square rounded-xl flex items-center justify-center text-slate-400 dark:text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-700 hover:text-primary transition-all cursor-pointer border-2 border-transparent">
                                <span class="material-symbols-outlined !text-[20px]">monitoring</span>
                            </div>
                            <div
                                class="aspect-square rounded-xl flex items-center justify-center text-slate-400 dark:text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-700 hover:text-primary transition-all cursor-pointer border-2 border-transparent">
                                <span class="material-symbols-outlined !text-[20px]">local_shipping</span>
                            </div>
                            <div
                                class="aspect-square rounded-xl flex items-center justify-center text-slate-400 dark:text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-700 hover:text-primary transition-all cursor-pointer border-2 border-transparent">
                                <span class="material-symbols-outlined !text-[20px]">history</span>
                            </div>
                            <div
                                class="aspect-square rounded-xl flex items-center justify-center text-slate-400 dark:text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-700 hover:text-primary transition-all cursor-pointer border-2 border-transparent">
                                <span class="material-symbols-outlined !text-[20px]">verified_user</span>
                            </div>
                            <div
                                class="aspect-square rounded-xl flex items-center justify-center text-slate-400 dark:text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-700 hover:text-primary transition-all cursor-pointer border-2 border-transparent">
                                <span class="material-symbols-outlined !text-[20px]">more_horiz</span>
                            </div>
                            <div
                                class="aspect-square rounded-xl flex items-center justify-center text-slate-400 dark:text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-700 hover:text-primary transition-all cursor-pointer border-2 border-transparent">
                                <span class="material-symbols-outlined !text-[20px]">layers</span>
                            </div>
                            <div
                                class="aspect-square rounded-xl flex items-center justify-center text-slate-400 dark:text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-700 hover:text-primary transition-all cursor-pointer border-2 border-transparent">
                                <span class="material-symbols-outlined !text-[20px]">account_tree</span>
                            </div>
                            <div
                                class="aspect-square rounded-xl flex items-center justify-center text-slate-400 dark:text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-700 hover:text-primary transition-all cursor-pointer border-2 border-transparent">
                                <span class="material-symbols-outlined !text-[20px]">widgets</span>
                            </div>
                            <div
                                class="aspect-square rounded-xl flex items-center justify-center text-slate-400 dark:text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-700 hover:text-primary transition-all cursor-pointer border-2 border-transparent">
                                <span class="material-symbols-outlined !text-[20px]">grid_view</span>
                            </div>
                            <div
                                class="aspect-square rounded-xl flex items-center justify-center text-slate-400 dark:text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-700 hover:text-primary transition-all cursor-pointer border-2 border-transparent">
                                <span class="material-symbols-outlined !text-[20px]">apps</span>
                            </div>
                            <div
                                class="aspect-square rounded-xl flex items-center justify-center text-slate-400 dark:text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-700 hover:text-primary transition-all cursor-pointer border-2 border-transparent">
                                <span class="material-symbols-outlined !text-[20px]">admin_panel_settings</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="grid grid-cols-2 gap-10 items-end">
                    <div>
                        <label
                            class="block text-[11px] font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-2">Thứ
                            tự
                            (Sort)</label>
                        <div class="flex items-center gap-2">
                            <button
                                class="size-11 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 flex items-center justify-center text-slate-500 dark:text-slate-400 hover:text-primary hover:border-primary/40 hover:bg-primary/5 transition-all shadow-sm active:scale-95">
                                <span class="material-symbols-outlined !text-[18px]">remove</span>
                            </button>
                            <input
                                class="w-full px-4 py-3 bg-slate-50 dark:bg-slate-800 border border-slate-200/60 dark:border-slate-700 rounded-xl text-[13.5px] font-medium text-slate-700 dark:text-slate-200 focus:bg-white dark:focus:bg-slate-800 focus:border-primary focus:ring-4 focus:ring-primary/5 transition-all outline-none placeholder:text-slate-400 text-center !py-2.5 !px-1 flex-1 font-bold"
                                type="number" value="10" />
                            <button
                                class="size-11 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 flex items-center justify-center text-slate-500 dark:text-slate-400 hover:text-primary hover:border-primary/40 hover:bg-primary/5 transition-all shadow-sm active:scale-95">
                                <span class="material-symbols-outlined !text-[18px]">add</span>
                            </button>
                        </div>
                    </div>
                    <div class="flex flex-col gap-3">
                        <label
                            class="block text-[11px] font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-0">Trạng
                            thái (Is Active)</label>
                        <div
                            class="flex items-center gap-4 bg-slate-50/50 dark:bg-slate-800/50 rounded-2xl px-5 py-2.5 border border-slate-100 dark:border-slate-700">
                            <div class="relative inline-flex h-6 w-11 items-center rounded-full bg-slate-200 dark:bg-slate-700 transition-colors cursor-pointer toggle-switch"
                                [attr.data-active]="activeStatus()" (click)="toggleActive()">
                                <span
                                    class="inline-block h-4.5 w-4.5 transform rounded-full bg-white transition-transform translate-x-1 shadow-sm toggle-dot"></span>
                            </div>
                            <span class="text-[13px] font-bold text-slate-600 dark:text-slate-300">
                                {{ activeStatus() ? 'Đang kích hoạt' : 'Vô hiệu hóa' }}
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Footer Actions -->
    <div
        class="p-10 border-t border-slate-100 dark:border-slate-800 bg-white dark:bg-slate-900 flex items-center gap-5 shrink-0 mt-auto">
        <button (click)="onSave()"
            class="flex-1 h-14 bg-primary text-white rounded-2xl font-extrabold text-[14px] shadow-button-floating hover:brightness-110 active:scale-[0.98] transition-all flex items-center justify-center gap-2">
            <span class="material-symbols-outlined !text-[20px]">save</span>
            Lưu thay đổi
        </button>
        <button (click)="onClose()"
            class="px-8 h-14 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-500 dark:text-slate-400 rounded-2xl font-bold text-[14px] hover:bg-slate-50 dark:hover:bg-slate-700 hover:text-slate-800 dark:hover:text-slate-200 active:scale-[0.98] transition-all">
            Hủy bỏ
        </button>
    </div>
</div>